{"version":3,"sources":["../../../units/urb-base-server/build-relay-schema.js"],"names":["main","result","errors","Error","JSON","stringify","taskPromises","resolve","Promise","all","then","console","log"],"mappings":";;AAEA,0B;;AAEA;AACA;;AAEA,yD;AACA,sE;;AAEA,QAAeA,KAAf;AACuB,oEADvB,SACQC,MADR;AAEOA,OAAOC,MAFd;AAGU,GAAIC,MAAJ,CAAW,gCAAkCC,KAAKC,SAAL,CAAgBJ,OAAOC,MAAvB,CAA+B,IAA/B,CAAqC,CAArC,CAA7C,CAHV;;AAKQI,YALR,CAKuB;AACnB;AACE,eAAKC,OAAL,CAAc,4DAAd,CADF;AAEE,IAFF;AAGEH,KAAKC,SAAL,CAAgBJ,MAAhB,CAAwB,IAAxB,CAA8B,CAA9B,CAHF,CADmB;;AAMnB;AACE,eAAKM,OAAL,CAAc,+DAAd,CADF;AAEE,IAFF;AAGE,4CAHF,CANmB,CALvB;;;;AAkBQC,QAAQC,GAAR,CAAaH,YAAb,CAlBR;;;AAqBAN,OAAOU,IAAP,CAAa,iBAAMC,SAAQC,GAAR,CAAa,MAAb,CAAN,EAAb","file":"build-relay-schema.js","sourcesContent":["// @flow\n\nimport path from 'path'\n\nimport { graphql } from 'graphql'\nimport { introspectionQuery, printSchema } from 'graphql/utilities'\n\nimport schema from '../urb-base-server/graphql/schema'\nimport ensureFileContent from '../urb-base-tools/ensureFileContent'\n\nasync function main() {\n  const result = await graphql( schema, introspectionQuery )\n  if ( result.errors )\n    throw new Error( 'Failed introspecting schema: ' + JSON.stringify( result.errors, null, 2 ) )\n\n  const taskPromises = [\n    ensureFileContent(\n      path.resolve( './units/_configuration/urb-base-server/graphql/schema.json' ),\n      null,\n      JSON.stringify( result, null, 2 ),\n    ),\n    ensureFileContent(\n      path.resolve( './units/_configuration/urb-base-server/graphql/schema.graphql' ),\n      null,\n      printSchema( schema ),\n    ),\n  ]\n\n  await Promise.all( taskPromises )\n}\n\nmain().then( () => console.log( 'Fin.' ) )\n"]}