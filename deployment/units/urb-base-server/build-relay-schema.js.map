{"version":3,"sources":["../../../units/urb-base-server/build-relay-schema.js"],"names":["main","result","errors","Error","JSON","stringify","taskPromises","resolve","Promise","all","then","console","log"],"mappings":";;AAEA,4B;;AAEA;AACA;;AAEA,2D;AACA,wE;;AAEA,eAAeA,IAAf,GAAsB;AACpB,QAAMC,SAAS,MAAM,sEAArB;AACA,MAAKA,OAAOC,MAAZ;AACE,QAAM,IAAIC,KAAJ,CAAW,kCAAkCC,KAAKC,SAAL,CAAgBJ,OAAOC,MAAvB,EAA+B,IAA/B,EAAqC,CAArC,CAA7C,CAAN;;AAEF,QAAMI,eAAe;AACnB;AACE,iBAAKC,OAAL,CAAc,4DAAd,CADF;AAEE,MAFF;AAGEH,OAAKC,SAAL,CAAgBJ,MAAhB,EAAwB,IAAxB,EAA8B,CAA9B,CAHF,CADmB;;AAMnB;AACE,iBAAKM,OAAL,CAAc,+DAAd,CADF;AAEE,MAFF;AAGE,+CAHF,CANmB,CAArB;;;;AAaA,QAAMC,QAAQC,GAAR,CAAaH,YAAb,CAAN;AACD;;AAEDN,OAAOU,IAAP,CAAa,MAAMC,QAAQC,GAAR,CAAa,MAAb,CAAnB","file":"build-relay-schema.js","sourcesContent":["// @flow\n\nimport path from 'path'\n\nimport { graphql } from 'graphql'\nimport { introspectionQuery, printSchema } from 'graphql/utilities'\n\nimport schema from '../urb-base-server/graphql/schema'\nimport ensureFileContent from '../urb-base-tools/ensureFileContent'\n\nasync function main() {\n  const result = await graphql( schema, introspectionQuery )\n  if ( result.errors )\n    throw new Error( 'Failed introspecting schema: ' + JSON.stringify( result.errors, null, 2 ) )\n\n  const taskPromises = [\n    ensureFileContent(\n      path.resolve( './units/_configuration/urb-base-server/graphql/schema.json' ),\n      null,\n      JSON.stringify( result, null, 2 ),\n    ),\n    ensureFileContent(\n      path.resolve( './units/_configuration/urb-base-server/graphql/schema.graphql' ),\n      null,\n      printSchema( schema ),\n    ),\n  ]\n\n  await Promise.all( taskPromises )\n}\n\nmain().then( () => console.log( 'Fin.' ) )\n"]}